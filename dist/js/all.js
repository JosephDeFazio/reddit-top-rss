function debounce(i,n){var o=null;return function(){clearTimeout(o);var t=arguments,e=this;o=setTimeout(function(){i.apply(e,t)},n)}}function myFunction(t){console.log(t),t.target.preventDefault();var e=document.getElementById("myInput");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),document.getElementById("myTooltip").innerHTML="Copied: "+e.value}function outFunc(){document.getElementById("myTooltip").innerHTML="Copy to clipboard"}var app=new Vue({el:"#app",data:{subreddit:subreddit,subredditTitle:null,subredditPrimaryColor:null,subredditIcon:"https://www.redditstatic.com/mweb2x/favicon/76x76.png",filterType:filterType,score:score,computedScore:score,percentage:percentage,postsPerDay:postsPerDay,cacheSize:"0 B",includeComments:includeComments,includedComments:comments,generatedRssUrl:null,postsLoading:!1,posts:[{url:null,title:null,score:0,scoreRaw:0,dateTime:null,dateTime2822:null,imgSrc:null}]},methods:{myFunction:function(){var t=document.getElementById("myInput");console.log(t.value),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.getElementById("myTooltip").innerHTML="Copied: "+t.value},outFunc:function(t){document.getElementById("myTooltip").innerHTML="Copy to clipboard"},submitFormOnChange:function(t){debounce(function(t){this.formSubmit(t)},250)},clearCache:function(){var e=this.cacheSize;this.cacheSize="0 B",window.axios.post("cache-clear.php").then(function(t){}.bind(this)).catch(function(t){console.log(t),this.cacheSize=e}),setTimeout(function(){this.formSubmit()}.bind(this),100)},buildURL:function(){var t=(t=window.location.port)?":"+t:"";url=window.location.href,url=window.location.protocol+"//"+window.location.hostname+t+window.location.pathname;var e=new URLSearchParams;e.set("subreddit",this.subreddit),"score"===this.filterType?e.set("score",this.score):"percentage"===this.filterType?e.set("threshold",this.percentage):"postsPerDay"===this.filterType&&e.set("averagePostsPerDay",this.postsPerDay),this.includeComments&&e.set("comments",this.includedComments),url=url+"?"+e,this.generatedRssUrl=url+"&view=rss",window.history.pushState({},window.title,"?"+e)},formSubmit:function(t){this.postsLoading=!0,document.getElementById("submit").innerHTML="Loading posts <svg class='icon icon-spinner2'><use xlink:href='#icon-spinner2'></use></svg>",document.getElementById("post-list").classList.remove("notices","warning","info"),document.getElementById("post-list").classList.add("loading"),document.querySelectorAll("#post-list .notice").forEach(function(t){t.remove()}),this.buildURL(),window.axios.post("postlist.php",{subreddit:this.subreddit,filterType:this.filterType,score:this.score,threshold:this.percentage,averagePostsPerDay:this.postsPerDay}).then(function(t){this.postsLoading=!1,document.getElementById("submit").innerHTML="Submit",document.getElementById("post-list").classList.remove("loading"),this.posts=t.data.postList,this.cacheSize=t.data.cacheSize,t.data.subredditValid?t.data.postList.length?(t.data.subredditIcon?this.subredditIcon=t.data.subredditIcon:this.subredditIcon="https://www.redditstatic.com/mweb2x/favicon/76x76.png",this.subredditTitle=t.data.subredditTitle,this.computedScore=t.data.thresholdScore):(t.data.subredditIcon?this.subredditIcon=t.data.subredditIcon:this.subredditIcon="https://www.redditstatic.com/mweb2x/favicon/76x76.png",this.subredditTitle=t.data.subredditTitle,document.getElementById("post-list").classList.add("notices","info"),document.getElementById("post-list").innerHTML='<div class="notice">No hot posts in <strong>/r/'+this.subreddit+"</strong> match the filters</div>"):(console.log("subreddit is not valid"),this.subredditIcon="https://www.redditstatic.com/mweb2x/favicon/76x76.png",document.getElementById("post-list").classList.add("notices","warning"),document.getElementById("post-list").innerHTML='<div class="notice"><strong>/r/'+this.subreddit+"</strong> is not a valid subreddit</div>")}.bind(this)).catch(function(t){console.log(t),this.postsLoading=!1,document.getElementById("submit").innerHTML="Submit"})}},watch:{subreddit:debounce(function(){this.formSubmit()},500),filterType:debounce(function(){this.formSubmit()},0),score:debounce(function(){this.formSubmit()},500),percentage:debounce(function(){this.formSubmit()},500),postsPerDay:debounce(function(){this.formSubmit()},500),includeComments:debounce(function(){this.buildURL()},0),includedComments:debounce(function(){this.buildURL()},500)},mounted:function(){this.formSubmit()}});